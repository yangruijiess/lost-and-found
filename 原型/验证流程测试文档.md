# 失物招领平台验证流程测试文档

## 1. 测试目标

确保基于大语言模型的验证流程能够正常工作，验证用户身份并防止未授权访问。

## 2. 测试用例

### 2.1 招领页面跳转测试

**测试场景1: 点击物品卡片跳转**
- **步骤**: 在招领页面点击任意物品卡片
- **预期结果**: 成功跳转到验证页面，URL参数包含正确的itemId、type和imageUrl
- **测试方法**: 
  1. 打开招领页面
  2. 点击任意物品卡片
  3. 验证URL是否包含正确的参数

**测试场景2: 点击"联系认领"按钮跳转**
- **步骤**: 在招领页面点击任意物品的"联系认领"按钮
- **预期结果**: 成功跳转到验证页面，URL参数包含正确的itemId、type和imageUrl
- **测试方法**: 
  1. 打开招领页面
  2. 点击任意物品的"联系认领"按钮
  3. 验证URL是否包含正确的参数

### 2.2 验证页面功能测试

**测试场景3: URL参数解析**
- **步骤**: 直接访问验证页面，包含itemId、type和imageUrl参数
- **预期结果**: 页面正确解析URL参数
- **测试方法**: 
  1. 访问 `失物招领平台_验证页面.html?id=1&type=found&imageUrl=test.jpg`
  2. 使用浏览器控制台检查参数是否正确解析

**测试场景4: API调用测试**
- **步骤**: 页面加载时，检查是否调用生成验证问题API
- **预期结果**: 页面尝试调用API（或显示模拟问题）
- **测试方法**: 
  1. 打开浏览器开发者工具的Network面板
  2. 访问验证页面
  3. 检查是否有API请求发送

**测试场景5: 备用问题测试**
- **步骤**: 模拟API调用失败场景
- **预期结果**: 页面显示备用验证问题
- **测试方法**: 
  1. 修改代码强制触发API调用失败（注释掉API调用部分）
  2. 访问验证页面
  3. 验证是否显示备用问题

### 2.3 验证逻辑测试

**测试场景6: 答案验证通过**
- **步骤**: 在验证表单中输入包含关键词的答案
- **预期结果**: 验证通过，成功跳转到详情页面
- **测试方法**: 
  1. 访问验证页面
  2. 在答案输入框中输入包含关键词的内容
  3. 点击提交按钮
  4. 验证是否成功跳转到详情页面

**测试场景7: 答案验证失败**
- **步骤**: 在验证表单中输入不包含关键词的答案
- **预期结果**: 验证失败，显示错误提示并跳回招领页面
- **测试方法**: 
  1. 访问验证页面
  2. 在答案输入框中输入不相关内容
  3. 点击提交按钮
  4. 验证是否显示错误提示并跳转回招领页面

**测试场景8: 关键词匹配测试**
- **步骤**: 测试不同形式的关键词匹配
- **预期结果**: 系统能够识别同义词和变体形式
- **测试方法**: 
  1. 记录当前的验证问题和关键词
  2. 尝试输入包含同义词或变体形式的答案
  3. 验证是否能够正确识别

### 2.4 验证状态管理测试

**测试场景9: localStorage状态存储**
- **步骤**: 验证通过后，检查localStorage
- **预期结果**: localStorage中存在验证通过的标记
- **测试方法**: 
  1. 成功通过验证并跳转到详情页面
  2. 使用浏览器控制台检查localStorage内容

**测试场景10: 过期状态测试**
- **步骤**: 验证通过后，等待24小时再访问
- **预期结果**: 验证状态过期，需要重新验证
- **测试方法**: 
  1. 成功通过验证
  2. 修改localStorage中的timestamp为过去时间
  3. 重新访问详情页面
  4. 验证是否需要重新验证

## 3. 测试注意事项

1. **模拟环境限制**：由于是前端原型，API调用可能无法实际连接到豆包API，测试时需关注模拟逻辑是否正确
2. **浏览器兼容性**：建议在不同浏览器（Chrome、Firefox、Safari等）上测试
3. **错误处理**：测试各种异常情况下的错误处理机制
4. **性能测试**：检查图片加载和API调用对页面性能的影响

## 4. 测试结果记录

| 测试用例 | 测试结果 | 备注 |
|---------|---------|------|
| 测试场景1 | | |
| 测试场景2 | | |
| 测试场景3 | | |
| 测试场景4 | | |
| 测试场景5 | | |
| 测试场景6 | | |
| 测试场景7 | | |
| 测试场景8 | | |
| 测试场景9 | | |
| 测试场景10 | | |

## 5. 测试结论

完成所有测试后，记录整体测试结论，包括：
- 验证流程是否正常工作
- 存在的问题和改进建议
- 下一步优化方向